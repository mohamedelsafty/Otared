<section class="register register__bg">
  <div class="container">
    <div class="page-header">
      <h2 class="page-header__title">تسجيل حساب جديد - مطور عقاري</h2>
      <p class="page-header__caption">
        مرحبا بك في موقع عطارد, يرجي تسجيل حسابك لتتمكن من استخدام موقع عطارد
      </p>
    </div>
    <form #registerForm="ngForm">
      <h4 class="page-title__subtitle">أنشأ حسابك الان بكل بساطة</h4>
      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label>الاسم بالكامل</label>
            <input
              type="text"
              class="form-control form-control--full-width"
              placeholder="اكتب اسمك هنا"
              name="personal_name"
              #personal_name="ngModel"
              [(ngModel)]="user.personal_name"
              required
            />
            <div
              *ngIf="
                personal_name.invalid &&
                (personal_name.dirty || personal_name.touched)
              "
              class="validation"
            >
              <p
                class="validation__title"
                *ngIf="personal_name.errors.required"
              >
                هذا الحقل مطلوب
              </p>
            </div>
          </div>

          <div class="form-group">
            <label>السجل التجاري</label>
            <input
              type="text"
              class="form-control form-control--full-width"
              placeholder="اسم الشركه"
              name="commercial_name"
              #commercial_name="ngModel"
              [(ngModel)]="user.commercial_name"
              required
            />
            <div
              *ngIf="
                commercial_name.invalid &&
                (commercial_name.dirty || commercial_name.touched)
              "
              class="validation"
            >
              <p
                class="validation__title"
                *ngIf="commercial_name.errors.required"
              >
                هذا الحقل مطلوب
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-3">
          <div class="form-group">
            <label>رقم السجل التجاري</label>
            <input
              type="text"
              class="form-control"
              placeholder="اكتب السجل التجاري"
              name="commercial_registration_no"
              pattern="[0-9]*"
              #commercial_registration_no="ngModel"
              [(ngModel)]="user.commercial_registration_no"
              required
            />
            <div
              *ngIf="
                commercial_registration_no.invalid &&
                (commercial_registration_no.dirty ||
                  commercial_registration_no.touched)
              "
              class="validation"
            >
              <p
                class="validation__title"
                *ngIf="commercial_registration_no.errors.required"
              >
                هذا الحقل مطلوب
              </p>
              <p
                class="validation__title"
                *ngIf="commercial_registration_no.errors?.pattern"
              >
                هذا الحقل يجب ان يحتوي علي ارقام فقط
              </p>
            </div>
          </div>
          <div class="form-group">
            <label>رقم هويه صاحب السجل</label>
            <input
              type="text"
              class="form-control"
              placeholder="رقم هوايه صاحب السجل"
              pattern="[0-9]{10}$"
              name="commercial_registration_idnumber"
              #commercial_registration_idnumber="ngModel"
              [(ngModel)]="user.commercial_registration_idnumber"
              required
            />
            <div
              *ngIf="
                commercial_registration_idnumber.invalid &&
                (commercial_registration_idnumber.dirty ||
                  commercial_registration_idnumber.touched)
              "
              class="validation"
            >
              <p
                class="validation__title"
                *ngIf="commercial_registration_idnumber.errors.required"
              >
                هذا الحقل مطلوب
              </p>
              <!-- <p
                class="validation__title"
                *ngIf="commercial_registration_idnumber.errors?.pattern"
              >
                هذا الحقل يجب ان يحتوي علي ارقام فقط
              </p> -->
              <p
                class="validation__title"
                *ngIf="commercial_registration_idnumber.errors?.pattern"
              >
                يجب أن يحتوي بين 10 و 10 رقمًا/أرقام
              </p>
            </div>
          </div>
          <div class="form-group">
            <label>رقم الجوال</label>
            <input
              type="namber"
              class="form-control"
              placeholder="05xxxxx"
              name="phone_number"
              pattern="[0-9]{10}$"
              #phone_number="ngModel"
              [(ngModel)]="user.phone_number"
              required
              (input)="errors.phone_number = ''"
            />
            <div
              *ngIf="
                phone_number.invalid &&
                (phone_number.dirty || phone_number.touched)
              "
              class="validation"
            >
              <p class="validation__title" *ngIf="phone_number.errors.required">
                هذا الحقل مطلوب
              </p>
              <p class="validation__title" *ngIf="phone_number.errors?.pattern">
                يجب أن يحتوي بين 10 و 10 رقمًا/أرقام
              </p>
            </div>
            <p class="validation__title" *ngIf="errors.phone_number">
              {{ errors.phone_number }}
            </p>
          </div>
          <div class="form-group">
            <label for="exampleFormControlSelect1">اختار المدينه</label>
            <select
              class="form-control"
              name="city_id"
              #city_id="ngModel"
              [(ngModel)]="user.city_id"
              required
            >
              <option hidden>اختر المدينه</option>
              <option *ngFor="let city of cities" [value]="city.id">{{
                city.name_arabic
              }}</option>
              <!-- <option>السعوديه</option>
              <option>تونس</option> -->
            </select>
            <div
              *ngIf="city_id.invalid && (city_id.dirty || city_id.touched)"
              class="validation"
            >
              <p class="validation__title" *ngIf="city_id.errors.required">
                هذا الحقل مطلوب
              </p>
            </div>
          </div>
          <div class="form-group">
            <label>كلمه السر</label>
            <div class="form-group__composed">
              <input
                [type]="isPasswordHashType"
                class="form-control"
                placeholder="*********"
                name="password_hash"
                #password_hash="ngModel"
                minlength="8"
                [(ngModel)]="user.password_hash"
                required
              />
              <svg
                class="form-group__icon"
                *ngIf="isPasswordHashType == 'password'"
                (click)="isPasswordHashType = 'text'"
              >
                <use
                  xlink:href="/assets/image/svg-icons.svg#icon-visibility"
                ></use>
              </svg>
              <svg
                class="form-group__icon"
                *ngIf="isPasswordHashType == 'text'"
                (click)="isPasswordHashType = 'password'"
              >
                <use xlink:href="/assets/image/svg-icons.svg#icon-hidden"></use>
              </svg>
            </div>
            <div
              *ngIf="
                password_hash.invalid &&
                (password_hash.dirty || password_hash.touched)
              "
              class="validation"
            >
              <p
                class="validation__title"
                *ngIf="password_hash.errors.required"
              >
                هذا الحقل مطلوب
              </p>
              <p
                class="validation__title"
                *ngIf="password_hash.errors?.minlength"
              >
                يجب أن يكون طول النص على الأقل 8 حروفٍ/حرفًا
              </p>
            </div>
          </div>
          <div class="form-group">
            <label> تاكيد كلمه السر </label>
            <div class="form-group__composed">
              <input
                [type]="isRPasswordHashType"
                class="form-control"
                placeholder="*********"
                name="r_password_hash"
                #r_password_hash="ngModel"
                [(ngModel)]="user.r_password_hash"
                required
              />
              <svg
                class="form-group__icon"
                *ngIf="isRPasswordHashType == 'password'"
                (click)="isRPasswordHashType = 'text'"
              >
                <use
                  xlink:href="/assets/image/svg-icons.svg#icon-visibility"
                ></use>
              </svg>
              <svg
                class="form-group__icon"
                *ngIf="isRPasswordHashType == 'text'"
                (click)="isRPasswordHashType = 'password'"
              >
                <use xlink:href="/assets/image/svg-icons.svg#icon-hidden"></use>
              </svg>
            </div>
            <div
              *ngIf="
                r_password_hash.invalid &&
                (r_password_hash.dirty || r_password_hash.touched)
              "
              class="validation"
            >
              <p
                class="validation__title"
                *ngIf="r_password_hash.errors.required"
              >
                هذا الحقل مطلوب
              </p>
            </div>
            <p
              class="validation__title"
              *ngIf="password_hash.value !== r_password_hash.value"
            >
              يجب ان يتطابق مع كلمه السر
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="register__link col-md-4">
          <button
            type="submit"
            [disabled]="!registerForm.valid"
            (click)="register()"
            class="button button--block button--radius button--secondary"
          >
            <span>أنشأ حسابك</span>
            <div class="loading" *ngIf="isLoading">
              <mat-spinner diameter="30" strokeWidth="3"></mat-spinner>
            </div>
          </button>
          <p class="register__login">
            لديك حساب في عطارد؟ <a href="#">سجل دخول الان</a>
          </p>
        </div>
      </div>
    </form>
  </div>
  <footer class="footer">
    <p class="footer__text">
      جميع الحقوق محفوظة لشركة عطارد للحلول السكنية 2020
    </p>
  </footer>
</section>
