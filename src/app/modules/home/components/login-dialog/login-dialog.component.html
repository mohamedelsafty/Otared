<div class="dialog">
  <div class="dialog__title dialog__title--secondary">
    <span>تسجيل دخول</span>
    <button class="dialog__close" mat-icon-button (click)="onNoClick()">
      <svg>
        <use xlink:href="/assets/image/svg-icons.svg#icon-close"></use>
      </svg>
    </button>
  </div>
  <form #loginForm="ngForm" class="dialog__content">
    <p class="typo--dark-blue typo-body2">
      {{ data.message }}
    </p>
    <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <label>رقم الجوال</label>
          <input
            type="namber"
            class="form-control"
            placeholder="05xxxxx"
            name="phone_number"
            pattern="[0-9]{10}$"
            #phone_number="ngModel"
            [(ngModel)]="user.phone_number"
            required
            (input)="error = false"
          />
          <div
            *ngIf="
              phone_number.invalid &&
              (phone_number.dirty || phone_number.touched)
            "
            class="validation"
          >
            <p class="validation__title" *ngIf="phone_number.errors.required">
              هذا الحقل مطلوب
            </p>
            <p class="validation__title" *ngIf="phone_number.errors?.pattern">
              يجب أن يحتوي بين 10 و 10 رقمًا/أرقام
            </p>
          </div>
          <p class="validation__title" *ngIf="error">
            هذه البيانات غير صحيحه
          </p>
        </div>
        <div class="form-group">
          <label>كلمه السر</label>
          <div class="form-group__composed">
            <input
              [type]="isTextFieldType ? 'text' : 'password'"
              class="form-control"
              placeholder="*********"
              name="password_hash"
              #password_hash="ngModel"
              minlength="8"
              [(ngModel)]="user.password_hash"
              required
              (input)="error = false"
            />
            <svg class="form-group__icon" (click)="togglePasswordFieldType()">
              <use
                xlink:href="/assets/image/svg-icons.svg#icon-visibility"
              ></use>
            </svg>
          </div>
          <div
            *ngIf="
              password_hash.invalid &&
              (password_hash.dirty || password_hash.touched)
            "
            class="validation"
          >
            <p class="validation__title" *ngIf="password_hash.errors.required">
              هذا الحقل مطلوب
            </p>
            <p
              class="validation__title"
              *ngIf="password_hash.errors?.minlength"
            >
              يجب أن يكون طول النص على الأقل 8 حروفٍ/حرفًا
            </p>
          </div>
          <p class="validation__title" *ngIf="error">
            هذه البيانات غير صحيحه
          </p>
        </div>
        <div class="">
          <a routerLink="/auth/forgot-password" class="forget__password"
            >هل نسيت كلمه السر؟</a
          >
        </div>
      </div>
    </div>
    <div class="dialog__actions">
      <button
        type="submit"
        [disabled]="!loginForm.valid"
        (click)="login()"
        class="button button--radius button--secondary button--loading button--block"
      >
        <span> دخول</span>
        <div class="loading" *ngIf="isLoading">
          <mat-spinner diameter="30" strokeWidth="3"></mat-spinner>
        </div>
      </button>
    </div>
    <div class="content-center">
      <div class="form-group">
        <div class="form-group__new-account">
          ليس لديك حساب في عطارد؟
          <a
            [routerLink]="'/auth/customer-register'"
            [queryParams]="data.params"
            (click)="onNoClick()"
            class=""
            >انشأ حسابك الان</a
          >
        </div>
      </div>
    </div>
  </form>
</div>
